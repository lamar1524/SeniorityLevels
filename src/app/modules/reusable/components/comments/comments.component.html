<div class="container">
  <span>{{ description }} <br /> </span>
  <span class="u-text--link" (click)="formToggle()">Comment</span>
  <div class="form__wrapper" *ngIf="formVisible$ | async">
    <form [formGroup]="commentForm" class="comment__form-group" (ngSubmit)="addComment()">
      <mat-form-field class="form-control__wrapper">
        <label>
          <textarea placeholder="Enter comment here" class="form-control" matNativeControl formControlName="content"></textarea>
        </label>
      </mat-form-field>
      <app-submit-button [disabled]="commentForm.ableToSend" [loading]="commentForm.disabled">Comment</app-submit-button>
    </form>
  </div>
  <div class="comments__wrapper" *ngIf="(commentsLoading$ | async) === false; else spinner">
    <div *ngIf="(comments$ | async).length === 0">
      No comments yet
    </div>
    <div class="comment" *ngFor="let comment of comments$ | async">
      <div class="comment__header">
        <div class="comment__author">{{ comment.author.email }}</div>
        <div class="comment__date">{{ comment.dateCreated }}</div>
      </div>
      <div class="comment__content">{{ comment.content }}</div>
    </div>
  </div>
  <ng-template #spinner>
    <div class="spinner__container">
      <mat-spinner [diameter]="50" class="u-loading__comments"></mat-spinner>
    </div>
  </ng-template>
</div>
